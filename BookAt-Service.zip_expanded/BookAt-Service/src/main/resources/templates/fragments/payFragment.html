<div th:fragment="payFragment">
<link rel="stylesheet" th:href="@{/css/payment.css}">
  <div class="pay-wrap">
    <input type="hidden" id="method" th:value="${method != null ? method : 'card'}">
    <input type="hidden" id="item_name" th:value="${title}">

    <div class="pay-tabs">
      <button type="button" class="pay-method-btn is-active" data-method="card">신용카드</button>
      <button type="button" class="pay-method-btn" data-method="vbank">무통장입금</button>
    </div>

    <!-- 여기: 패널 적용 + 고정 문구 -->
    <div id="vbankSection" class="panel pay-card">
      <h4>입금계좌</h4>
      <div class="bank-line">국민은행 000000-00-000-000</div>
      <div class="bank-meta">예금주: 주식회사 북캣</div>

      <div class="field" style="margin-top:12px;">
        <div class="label">입금자명</div>
        <input id="depositor_name_input" class="input" type="text" placeholder="입금자명(미입력시 주문자명)">
      </div>

      <div class="ctrl-row">
        <input type="checkbox" id="cash_rcpt_check" class="check">
        <label for="cash_rcpt_check">현금영수증 신청</label>
      </div>

      <div id="cash_rcpt_detail">
        <div class="ctrl-row" style="margin-left:1px;">
          <input type="radio" name="cash_rcpt_type" id="rcpt_ded" value="DED" class="radio" checked>
          <label for="rcpt_ded">소득공제용</label>
          <input type="radio" name="cash_rcpt_type" id="rcpt_biz" value="BIZ" class="radio" style="margin-left:14px;">
          <label for="rcpt_biz">지출증빙용</label>
        </div>
        <input id="cash_rcpt_number_input" class="input" type="text" placeholder="휴대폰번호 입력">
        <div class="help">(-) 없이 숫자만 입력</div>
      </div>
    </div>

    <button id="payBtn"
            type="button"
            class="btn pay-button"
            th:attr="data-token=${paymentToken},data-merchant=${merchantUid},data-amount=${amount},data-title=${title}">
      결제하기
    </button>

    <form id="payCompleteForm" th:action="@{/payment/complete}" method="post" style="display:none;">
      <input type="hidden" id="imp_uid" name="impUid">
      <input type="hidden" id="merchantUid" name="merchantUid" th:value="${merchantUid}">
      <input type="hidden" id="merchant_uid" name="merchant_uid" th:value="${merchantUid}">
      <input type="hidden" name="amount" th:value="${amount}">
      <input type="hidden" name="itemName" th:value="${title}">
      <input type="hidden" name="payMethod" id="pay_method_hidden" th:value="${method != null ? method : 'card'}">
      <input type="hidden" id="depositor_name_hidden" name="depositor">
      <input type="hidden" id="cash_receipt_apply_hidden" name="cashReceiptApply">
      <input type="hidden" id="cash_receipt_type_hidden" name="cashReceiptType">
      <input type="hidden" id="cash_receipt_number_hidden" name="cashReceiptNumber">
    </form>
  </div>
</div>


<!--
    - 본 프래그먼트에서 내려보내는 값(title, amount, method 등)은
      Controller: model.addAttribute("title", ctx.title()); 로 세팅됨.
      JS는 #item_name(hidden)과 #payBtn(data-title)에서 동일 값 사용.
  -->
